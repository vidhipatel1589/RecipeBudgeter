<!DOCTYPE html>
<html lang="en">
<head>
    <title>Recipe Budgeter</title>
    <link rel="stylesheet" href="style.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css'
          rel='stylesheet'>
</head>
<body>
    <div class="wrapper">
        <h1 class="Title">Recipe Budgeter</h1>
        <form id="loginForm">
            <h1>Login</h1>
            <div class="input-box">
                <input type="text" id="username" placeholder="Username/Email"
                       required>
                <i class='bx bxs-user'></i>
            </div>

            <div class="input-box">
                <input type="password" id="password"
                       placeholder="Password" required>
                <i class='bx bxs-lock-alt'></i>
            </div>

            <button type="submit" class="login-button">Login</button>

            <div class="register">
                <a href="#" onclick="showSignup()">Create Account</a>
            </div>
        </form>
    </div>

    <div class="wrapper" id="signupWrapper" style="display: none;"> 
        <form id="signupForm">
            <h1 class="Title">Recipe Budgeter</h1>
            <h1 class="Subtitle">Sign Up</h1>

            <div class="input-box">
                <input type="text" id="name" placeholder="Name" required>
                <i class='bx bxs-envelope'></i>
            </div>  

            <div class="input-box">
                <input type="text" id="newUsername" placeholder="Username" required>
                <i class='bx bxs-user'></i>
            </div> 

            <div class="input-box">
                <input type="password" id="newPassword" placeholder="Password" required>
                <i class="bx bxs-lock-alt"></i>
            </div>

            <div class="input-box">
                <input type="password" id="confirmpassword" placeholder="Confirm Password" required>
                <i class='bx bxs-lock-alt'></i>
            </div>     
            
            <button type="submit" class="login-button">Sign Up</button>

            <div class="register">
                <a href="#" onclick="showLogin()">Already have an account? Login</a>
            </div>    
        </form>
    </div>

    <!-- navigation bar -->
    <nav class="navbar" id="navbar" style="display: none;">
        <ul>
            <li><a href="#home">Home</a></li>
            <li><a href="#add-recipe">Add A New Recipe</a></li>
            <li><a href="#view-recipes">Update A Recipe</a></li>
            <li><a href="#view-recipe-cost">View Recipe Cost</a></li>
            <li><a href="#" onclick="showLogin()">Logout</a></li>
        </ul>
    </nav>

    <!------------------------------------------------------------------------------------------->
    <!-- for home page -->
    <div class="section" id="home" style="display: none;">
        <h2>Welcome to Recipe Budgeter</h2>
        <h1>Here are your recipes!</h1>
        <h3 style="text-align: center;">Click on a recipe to view details</h3>

        <!--recipe list-->
        <div id="recipeList">
            <!-- Populated with JS -->
        </div>


        <!--recipe cost details for home page -->
        <div id="recipeCostDetailsHome" style="display: none;">
            <h4 id="chosenRecipeNameHome"></h4>
            <div class="description-box">
                <textarea readonly id="recipeDescriptionBox" placeholder="Recipe Description" required></textarea>
            </div> 
            <table>
                <thead>
                    <tr>
                        <th>Ingredient</th>
                        <th>Quantity</th>
                        <th>Unit</th>
                        <th>Price</th>
                        <th>Availability</th>
                    </tr>
                </thead>
                <tbody id="ingredientCostListHome">

                </tbody>
            </table>
            <h5>Total Cost: <span id="totalCostHome"></span></h5>
        </div>

    </div>

    <!------------------------------------------------------------------------------------------->
    <!-- for recipe page -->
    <div class="section" id="add-recipe" style="display: none;">
        <h2>Add Your Recipe</h2>
        <h3 style="text-align: center;">Add your own recipe</h3>
        <form action="" class="add-recipe-entry">
            <div class="input-box">
                <input type="text" placeholder="Recipe Name" required>
            </div>
            <div class="description-box">
                <textarea placeholder="Recipe Description" required></textarea>
            </div>    
            <div class="ingredients-list" id="ingredients-list">
                <div class="ingredient">
                    <select id="ingredientDropdown" required>
                        <option value="">Select Ingredient</option>
                    </select>
                    <input type="number" placeholder="Quantity" required min = "0" id="initialQuantity">
                    <select>
                        <option value="Units">Units</option>
                        <option value="Cups">Cups</option>
                        <option value="Pounds">Pounds</option>
                        <option value="Ounces">Ounces</option>
                    </select>
                    <button type="button" class="X-button" onclick="deleteIngredient(this)">X</button>
                </div>
            </div>

            <button type="button" onclick="addIngredient()">Add Another Ingredient</button>
            <button type="button" onclick="saveNewRecipe()">Save Recipe</button>
        </form>
    </div>

    <script>
        // Prevent negative input for initial quantity field on page load
        document.addEventListener("DOMContentLoaded", () => {
            const initialQuantityInput = document.getElementById('initialQuantity');
            initialQuantityInput.addEventListener('input', () => {
                if (initialQuantityInput.value < 0) {
                    initialQuantityInput.value = 0;
                }
            });
        });
    </script>

    <!------------------------------------------------------------------------------------------->
    <!-- for recipes section -->
    <div class="section" id="view-recipes" style="display: none;">
        <h2>List of Recipes</h2>
        <h3 style="text-align: center;">Select a recipe</h3>
        <!-- select recipe -->
        <select id="chooseRecipeUpdate" onchange="loadRecipeData()">
            <option value="">Select a recipe</option>
        </select>

        <!-- to allow update recipe -->
        <form id="updateRecipeForm" style="display: none;">
            <h1>
                <input type="text" id="recipeName" required>
            </h1>
            
            <div class="description-box">
                <textarea placeholder="Recipe Description" required></textarea>
            </div>  
            <div class="ingredients-list" id="ingredient-list">
                <div class="ingredient">
                    <input type="number" placeholder="Quantity" required min = "0">
                    <select>
                        <option value="Units">Units</option>
                        <option value="Cups">Cups</option>
                        <option value="Pounds">Pounds</option>
                        <option value="Ounces">Ounces</option>
                    </select>
                    <button  type="button" class="X-button" onclick="deleteIngredient(this)">X</button>
                </div>
            </div>

            <button type="button" onclick="addAnotherIngredient()">Add Another Ingredient</button>
            <button type="button" onclick="updateRecipe()">Save Recipe</button>
            <button type="button" onclick="deleteRecipe()">Delete Recipe</button>
        </form>
    </div>

    <!------------------------------------------------------------------------------------------->
    <!-- for recipe cost section -->
    <div class="section" id="view-recipe-cost" style="display: none;">
        <h2>Recipe Cost</h2>
        
        <!-- choose recipe to see cost -->
        <select id="chooseRecipeCost" onchange="viewRecipeCost()">
            <option value="">Select a recipe</option>
        </select>

        <!-- see details -->
        <div id="recipeCostDetails" style="display: none;">
            <h3 id="chosenRecipeName"></h3>
            <div class="description-box">
                <textarea readonly id="recipeDescriptionCostBox" placeholder="Recipe Description" required></textarea>
            </div> 
            <table>
                <thead>
                    <tr>
                        <th>Ingredient</th>
                        <th>Quantity</th>
                        <th>Unit</th>
                        <th>Price</th>
                        <th>Availability</th>
                    </tr>
                </thead>
                <tbody id="ingredientCostList">
                    <!-- Populated with JS -->
                </tbody>
            </table>
            <h4>Total Cost: <span id="totalCost"></span></h4>
        </div>
    </div>

    <!------------------------------------------------------------------------------------------->
    <!-- <script src="js/login.js"></script>
    <script src="js/home.js"></script> -->
    <script type="module" src="./js/main.js"></script>
</body>
</html>